# Basic GET with no parameters
get_status:
  path: /status
  expectations:
  - expect:
      status: 200
      json:
        status: "ok"
        version: kind_of.string

# Basic POST to create a resource
create_user:
  path: /users
  method: post
  body:
    name: "Basic Test User"
    email: "basic@example.com"
  expectations:
  - expect:
      status: 201
      json:
        user:
          name: "Basic Test User"
          email: "basic@example.com"
          id: kind_of.integer

# Create a user for show/update/delete
setup_user:
  path: /users
  method: post
  body:
    name: "Test User for Operations"
    email: "operations@example.com"
  expectations:
  - variables:
      user_id: response.body.user.id
    expect:
      status: 201

# GET with path parameter
get_user:
  path: /users/{id}
  variables:
    user_id: factories.user.id
  query:
    id: variables.user_id
  expectations:
  - expect:
      status: 200
      json:
        user:
          id: variables.user_id
          name: kind_of.string

# PATCH request
update_user:
  path: /users/{id}
  method: patch
  variables:
    user_id: factories.user.id
  query:
    id: variables.user_id
  body:
    name: "Updated Basic User"
  expectations:
  - expect:
      status: 200
      json:
        user:
          name: "Updated Basic User"

# DELETE request
delete_user:
  path: /users/{id}
  method: delete
  variables:
    user_id: factories.user.id
  query:
    id: variables.user_id
  expectations:
  - expect:
      status: 204
