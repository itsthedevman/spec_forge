# User defined
name:
  type: string
  default: ""

debug:
  type: boolean
  aliases:
    - pry
    - breakpoint
  default: false
  required: false

tags:
  type: array
  default: []
  structure:
    type: string

documentation:
  type: hash
  default: {}

request:
  type: hash
  default: {}
  structure:
    # Default all of these to null so they don't show up in the default request hash
    base_url:
      type: string
      default: null
      aliases:
        - base_path

    url:
      type: string
      default: null
      aliases:
        - path

    http_verb:
      type: string
      default: null # Do not default this to "GET". Leave it null. Seriously.
      aliases:
        - method
        - http_method
      validator: http_verb

    headers:
      type: hash
      default: null

    query:
      type:
        - hash
        - string
      default: null
      aliases:
        - params

    raw:
      type: string
      default: null
      aliases:
        - body
        - data

    json:
      type: hash
      default: null
    # xml:
    #   type: hash
    #   default: {}

expect:
  type: array
  default: []
  structure:
    type: hash
    default: {}
    structure:
      name:
        type: string

      status:
        type:
          - string
          - integer

      headers:
        type: hash
        default: {}

      raw:
        type: string
        default: null
        aliases:
          - body
          - data

      json:
        type: hash
        default: {}
        structure:
          size:
            type:
              - string
              - integer

          structure:
            type:
              - array
              - hash

          content:
            type:
              - array
              - hash
      # xml:
      #   type: hash
      #   default: {}

store:
  type: hash
  default: {}

hooks:
  type: array
  default: []
  structure:
    type: hash
    structure:
      before_file:
        type: [string, hash]
        transformer: normalize_callback
        structure:
          name:
            type: string
          arguments:
            type: [array, hash]

      before_each:
        type: [string, hash]
        transformer: normalize_callback
        structure:
          name:
            type: string
          arguments:
            type: [array, hash]

      after_each:
        type: [string, hash]
        transformer: normalize_callback
        structure:
          name:
            type: string
          arguments:
            type: [array, hash]

      after_file:
        type: [string, hash]
        transformer: normalize_callback
        structure:
          name:
            type: string
          arguments:
            type: [array, hash]

call:
  type: [string, hash]
  default: {}
  transformer: normalize_callback
  structure:
    name:
      type: string
    arguments:
      type: [array, hash]

include:
  type: [string, array]
  default: []
  transformer: normalize_includes
